--- 
layout: post
title: SSH Tips
published: true
meta: 
  _edit_last: "1"
tags: 
- CLI
- "D\xC3\xA9faut"
- memo
- SSH
type: post
status: publish
---
<h3>Authentification sans mot de passe</h3>
Cette configuration ne doit être faite que si vous avez un minimum confiance dans la sécurité de l'hôte client. Une faille de sécurité sur le client compromettra automatique celle de l'hôte distant.

Créer une clef d'authentification coté client (taper "entrer" à chaque invite)
<pre lang="bash">ssh-keygen</pre>
Puis la copier sur la machine distante
<pre lang="bash">ssh-copy-id arnaud@avignon.didry.info</pre>
<h3>Configuration des connections (hôtes, utilisateurs, tunnels)</h3>
Coté client, ajouter les lignes suivantes au fichier ~/.ssh/config
<pre lang="ssh_config">Host avignon
    Hostname avignon.didry.info
    User arnaud

Host univ
    Hostname backdoor.univ-avignon.fr
    User uapv62073
    LocalForward localhost:25 smtp.univ-avignon.fr:25
    LocalForward localhost:389 ldap.univ-avignon.fr:389</pre>
Taper simplement <code>ssh avignon</code> pour se connecter au serveur défini dans le fichier ~/.ssh/config

<strong>Remarques pour les geek feignants</strong> : Les hôtes que vous aurez définis seront pris en compte dans la complétion de Bash (sous ubuntu du moins) ainsi que sous <a hreflang="en" href="http://do.davebsd.com/">Gnome-do</a> (par le biais d'un plugin).
<h3>Options de connexion utiles</h3>
<code>-X</code> : "X11 forward" permet d'ouvrir localement des applications graphiques

<code>-v</code> : "verbose" permet de vérifier par exemple que les tunnels se sont bien ouverts
<h3>Connections en utilisant plusieurs hôtes intermédiaires.</h3>
<blockquote>Bélier permet l’ouverture automatisée d’un terminal ou l’exécution de commandes sur un ordinateur distant via une connexion ssh. L’intérêt principal de Bélier réside dans sa capacité à traverser plusieurs machines intermédiaires avant d’accomplir la tâche assignée.</blockquote>
<a hreflang="fr" href="http://www.ohmytux.com/belier/">http://www.ohmytux.com/belier/</a>
